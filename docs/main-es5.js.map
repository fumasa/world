{"version":3,"sources":["webpack:///$_lazy_route_resource lazy namespace object","webpack:///src/_component/map-tool/map-tool.component.ts","webpack:///src/_component/map-tool/map-tool.component.html","webpack:///src/_enum/world.biome.ts","webpack:///src/_generator/world.generator.ts","webpack:///src/_model/coordinate.ts","webpack:///src/_model/layer.ts","webpack:///src/_model/point.ts","webpack:///src/_model/vector.ts","webpack:///src/_model/world.info.ts","webpack:///src/_utils/biome.color.ts","webpack:///src/_utils/conversor.ts","webpack:///src/_utils/helper.ts","webpack:///src/_utils/perlin.noise.ts","webpack:///src/app/app-routing.module.ts","webpack:///src/app/app.component.ts","webpack:///src/app/app.component.html","webpack:///src/app/app.module.ts","webpack:///src/environments/environment.ts","webpack:///src/main.ts"],"names":["webpackEmptyAsyncContext","req","Promise","resolve","then","e","Error","code","keys","module","exports","id","MapToolComponent","world","sessionKey","position","zoom","step","jump","stepPoints","toggle","drawSvgMercator","console","log","context","canvas","nativeElement","getContext","projection","svg","width","document","body","clientWidth","height","clientHeight","attr","image","createImageData","renderSvgMercator","data","clearRect","i","byteLength","putImageData","getVectors","layers","forEach","layer","element","createElementNS","path","limit","start","X","Y","vector","end","setAttribute","style","stroke","fillOpacity","strokeWidth","appendChild","mercator","renderMercator","onlyShoreline","all","tree","ore","c","x","y","info","GetInformation","FromMercator","color","Get","Biome","Shoreline","cell","Uint8ClampedArray","array","GetAllMercatorPoints","mercatorPoint","ToMercator","coordinate","ToIdxWidth","points","change","selector","templateUrl","styleUrls","WorldBiome","WorldGenerator","seed","useDefault","radius","noise","raw","topology","trees","ores","prepareSeed","DefaultP","RandomP","generateNoise","generateNewNoise","Math","floor","JSON","parse","stringify","length","push","pop","splice","a","b","r","dist_points","onlyTopology","point","ToCardian","factor","trunc","Noise","inspector","ini","Date","count","countLand","ret","TruncDecimals","getTime","decPl","DecimalPlaces","longitude","latitude","allVectors","no","ne","so","se","AddInIfInvertNotExistsAndRemoveItFrom","copyCondensedVectors","vectors","startVector","copy","runner","equals","vectorIdx","findIndex","v","shrunk","copyAllVectors","condensedVectors","inverted","containsIn","filter","layeredPaths","shrunkenLayeredPaths","shrunkenLayer","isCollinear","polygon","probePolygon","map","p","addLongitude","probeNearShorepoints","newPoints","beforeCount","newPoint","find","undefined","afterCount","east","eastInfo","shoreline","south","addLatitude","southInfo","west","westInfo","north","northInfo","Coordinate","value","precision","Layer","innerLayers","Point","Z","inside","j","xi","yi","xj","yj","intersect","Vector","A","dot","det","atan2","WorldInfo","deepWater","swallowWater","beach","sandy","grass","woods","forest","mountain","snow","ToDegrees","inner","d","item","itemPoint","variator","BiomeColor","type","Conversor","atan","sqrt","pow","cos","ToRadians","sin","angle","PI","round","RAD2DEG","PI_4","Helper","num","n","toString","charAt","replace","stepX","stepY","idx","action","initx","inity","increment","Perlin","z","u","fade","w","AA","AB","B","BA","BB","lerp","grad","t","hash","h","persistence","octaves","total","frequency","amplitude","maxValue","perlin","Uint8Array","window","crypto","getRandomValues","list","routes","AppRoutingModule","forRoot","imports","AppComponent","title","AppModule","declarations","providers","bootstrap","environment","production","bootstrapModule","err","error"],"mappings":"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","file":"main-es5.js","sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"./$$_lazy_route_resource lazy recursive\";","import { Component, ElementRef, ViewChild, AfterViewInit } from '@angular/core';\r\nimport { WorldGenerator } from 'src/_generator/world.generator';\r\nimport { BiomeColor } from 'src/_utils/biome.color';\r\nimport { Point } from 'src/_model/point';\r\nimport * as d3 from 'd3';\r\nimport { WorldInfo } from 'src/_model/world.info';\r\nimport { Conversor } from 'src/_utils/conversor';\r\nimport { Vector } from 'src/_model/vector';\r\n\r\ninterface Datum {\r\n  id: string;\r\n}\r\n\r\n@Component({\r\n  selector: 'map-tool',\r\n  templateUrl: './map-tool.component.html',\r\n  styleUrls: ['./map-tool.component.scss']\r\n})\r\nexport class MapToolComponent implements AfterViewInit {\r\n  world: WorldGenerator = new WorldGenerator();\r\n  @ViewChild('canvas', { static: false }) canvas: ElementRef;\r\n  @ViewChild('svg', { static: false }) svg: ElementRef;\r\n  public context: CanvasRenderingContext2D;\r\n\r\n  public sessionKey = 'points';\r\n\r\n  position = new Point(0, 0, 0);\r\n  zoom = 1;\r\n\r\n  step = 20;\r\n  jump = 1.25;\r\n\r\n  stepPoints = 0.2;\r\n\r\n  constructor() {\r\n  }\r\n\r\n  // public get Points(): Promise<WorldInfo[]> {\r\n  //   return new Promise<WorldInfo[]>((resolve) => {\r\n  //     if (sessionStorage.getItem(this.sessionKey) === null) {\r\n  //       this.world.GetAllPoints(this.stepPoints).then((p) => {\r\n  //         sessionStorage.setItem(this.sessionKey, JSON.stringify(p));\r\n  //         console.log('new points', p.length);\r\n  //         resolve(p);\r\n  //       });\r\n  //     } else {\r\n  //       resolve(JSON.parse(sessionStorage.getItem(this.sessionKey)));\r\n  //     }\r\n  //   });\r\n  // }\r\n\r\n  // public set Points(points: Promise<WorldInfo[]>) {\r\n  //   points.then((p) => {\r\n  //     sessionStorage.setItem(this.sessionKey, JSON.stringify(p));\r\n  //   });\r\n  // }\r\n\r\n  ngAfterViewInit(): void {\r\n\r\n    //this.change();\r\n\r\n    //this.drawMercator();\r\n    // this.drawMercatorAlt().then(d => {\r\n    //   console.log('done', d);\r\n    // });\r\n    //this.drawGlobe();\r\n\r\n    this.drawSvgMercator();\r\n\r\n    console.log('done');\r\n  }\r\n\r\n  public toggle = true;\r\n  public change() {\r\n    // if (this.toggle) {\r\n    //   this.drawMercator();\r\n    // } else {\r\n    //   this.drawMercatorAlt().then(d => {\r\n    //     console.log('done', d);\r\n    //   });\r\n    // }\r\n    // this.toggle = !this.toggle;\r\n  }\r\n\r\n  private drawSvgMercator() {\r\n\r\n    this.context = (<HTMLCanvasElement>this.canvas.nativeElement).getContext('2d');\r\n    const projection = d3.geoOrthographic();\r\n    const svg = d3.select(this.svg.nativeElement);\r\n\r\n    const width = document.body.clientWidth - 40;\r\n    const height = (document.body.clientHeight - 40);\r\n\r\n    this.canvas.nativeElement.width = width;\r\n    this.canvas.nativeElement.height = height;\r\n\r\n    svg.attr('width', width).attr('height', height);\r\n\r\n    const image = this.context.createImageData(width, height);\r\n\r\n    this.renderSvgMercator(width, height).then(data => {\r\n      this.context.clearRect(0, 0, width, height);\r\n      for (let i = 0; i < data.image.byteLength; i++) {\r\n        image.data[i] = data.image[i];\r\n      }\r\n      this.context.putImageData(image, 0, 0);\r\n\r\n      this.world.getVectors(width, height).then((layers) => {\r\n        layers.forEach(layer => {\r\n          const element = document.createElementNS('http://www.w3.org/2000/svg', 'path');\r\n          let path = `M ${layer.limit[0].start.X} ${layer.limit[0].start.Y} `;\r\n          layer.limit.forEach(vector => {\r\n            path += `L ${vector.end.X} ${vector.end.Y} `;\r\n          });\r\n          path += 'Z';\r\n          element.setAttribute('d', path);\r\n          element.style.stroke = '#000';\r\n          element.style.fillOpacity = '.5';\r\n          element.style.strokeWidth = '1px';\r\n\r\n          this.svg.nativeElement.appendChild(element);\r\n        });\r\n\r\n        // const svg = d3.select(this.svg.nativeElement);\r\n        // svg.attr('width', width).attr('height', height);\r\n        // svg.selectAll(\"polygon\").data(layers).enter().append(\"polygon\").attr(\"points\", (d) => {\r\n        //   return d.map(function (d) {\r\n        //     return [d.start.X, d.start.Y].join(\",\");\r\n        //   }).join(\" \");\r\n        // });\r\n      });\r\n    });\r\n\r\n    // const svg = d3.select(this.svg.nativeElement);\r\n    // const x = (long: number) => (long + 180)/(360 / width);\r\n    // const y = (lat: number) => (lat + 90)/(180 / height);\r\n\r\n    // svg.attr('width', width).attr('height', height);\r\n\r\n    // const points: WorldInfo[][] = this.world.GetShorlines();\r\n    // console.log(`points len ${points.length}`);\r\n\r\n    // svg.selectAll(\"polygon\").data(points).enter().append(\"polygon\").attr(\"points\", (d) => {\r\n    //   return d.map(function (d) {\r\n    //     const point = Conversor.ToMercator(d.coordinate, width, height);\r\n    //     return [point.X, point.Y].join(\",\");\r\n    //   }).join(\" \");\r\n    // });\r\n\r\n  }\r\n\r\n  // private drawGlobe() {\r\n  //   this.context = (<HTMLCanvasElement>this.canvas.nativeElement).getContext('2d');\r\n  //   const projection = d3.geoOrthographic();\r\n\r\n  //   const width = document.body.clientWidth - 40;\r\n  //   const height = document.body.clientHeight - 40;\r\n\r\n  //   this.canvas.nativeElement.width = width;\r\n  //   this.canvas.nativeElement.height = height;\r\n\r\n  //   const mercator = this.renderMercator(this.context.createImageData(width, height));\r\n\r\n  //   const globe = this.context.createImageData(width, height);\r\n  //   this.renderGlobe(globe, mercator.data, projection);\r\n  //   this.context.clearRect(0, 0, width, height);\r\n  //   this.context.putImageData(globe, 0, 0);\r\n\r\n  //   document.onmousemove = (event) => {\r\n  //     var p = [event.clientX, event.clientY];\r\n  //     const M = d3.scaleLinear().domain([0, width]).range([-180, 180]);\r\n  //     const M = d3.scaleLinear().domain([0, height]).range([90, -90]);\r\n\r\n  //     projection.rotate([M(p[0]), M(p[1])]);\r\n\r\n  //     this.renderGlobe(globe, mercator.data, projection);\r\n\r\n  //     this.context.clearRect(0, 0, width, height);\r\n  //     this.context.putImageData(globe, 0, 0);\r\n  //   };\r\n  // }\r\n\r\n  private drawMercator() {\r\n    this.context = (<HTMLCanvasElement>this.canvas.nativeElement).getContext('2d');\r\n    const projection = d3.geoOrthographic();\r\n\r\n    const width = document.body.clientWidth - 40;\r\n    const height = document.body.clientHeight - 40;\r\n\r\n    this.canvas.nativeElement.width = width;\r\n    this.canvas.nativeElement.height = height;\r\n\r\n    const mercator = this.renderMercator(this.context.createImageData(width, height));\r\n\r\n    this.context.clearRect(0, 0, width, height);\r\n    this.context.putImageData(mercator, 0, 0);\r\n  }\r\n\r\n  private renderMercator(image: ImageData, onlyShoreline = false) {\r\n    const data = image.data;\r\n    const width = image.width;\r\n    const height = image.height;\r\n    let all = 0;\r\n    let tree = 0;\r\n    let ore = 0;\r\n    let c = 0;\r\n\r\n    for (var x = 0; x < width; x++) {\r\n      for (var y = 0; y < height; y++) {\r\n        let info = this.world.GetInformation(Conversor.FromMercator(new Point(x, y, 0), width, height), this.zoom);\r\n        let color = BiomeColor.Get(info.Biome);\r\n\r\n        if (onlyShoreline) {\r\n          if (info.Shoreline) {\r\n            color = [0, 0, 0, 255];\r\n            c++;\r\n          } else {\r\n            color = [255, 255, 255, 255];\r\n          }\r\n        }\r\n\r\n        let cell = (x + y * width) * 4;\r\n\r\n        data[cell] = color[0];\r\n        data[cell + 1] = color[1];\r\n        data[cell + 2] = color[2];\r\n        data[cell + 3] = color[3];\r\n\r\n        all++;\r\n      }\r\n    }\r\n    console.log(`info all:${all} tree:${tree} ore:${ore} ${width}x${height} ${c}`);\r\n\r\n    return image;\r\n  }\r\n\r\n  private renderMercator2(width: number, height: number) {\r\n    let all = 0;\r\n\r\n    const data: Uint8ClampedArray = new Uint8ClampedArray(width * height * 4);\r\n\r\n    for (var x = 0; x < width; x++) {\r\n      for (var y = 0; y < height; y++) {\r\n        let info = this.world.GetInformation(Conversor.FromMercator(new Point(x, y, 0), width, height), this.zoom);\r\n        let color = BiomeColor.Get(info.Biome);\r\n\r\n        let cell = (x + y * width) * 4;\r\n\r\n        data[cell] = color[0];\r\n        data[cell + 1] = color[1];\r\n        data[cell + 2] = color[2];\r\n        data[cell + 3] = color[3];\r\n\r\n        all++;\r\n      }\r\n    }\r\n    console.log(`alt info all:${all} ${width}x${height}`);\r\n\r\n    return data;\r\n  }\r\n\r\n  // private async drawMercatorAlt() {\r\n  //   this.context = (<HTMLCanvasElement>this.canvas.nativeElement).getContext('2d');\r\n  //   const projection = d3.geoOrthographic();\r\n\r\n  //   const width = document.body.clientWidth - 40;\r\n  //   const height = document.body.clientHeight - 40;\r\n\r\n  //   this.canvas.nativeElement.width = width;\r\n  //   this.canvas.nativeElement.height = height;\r\n\r\n  //   const mercator = await this.renderMercatorAlt(this.context.createImageData(width, height));\r\n\r\n  //   this.context.clearRect(0, 0, width, height);\r\n  //   this.context.putImageData(mercator, 0, 0);\r\n  // }\r\n\r\n  // private renderMercatorAlt(image: ImageData): Promise<ImageData> {\r\n  //   return new Promise<ImageData>((resolve) => {\r\n  //     const data = image.data;\r\n  //     const width = image.width;\r\n  //     const height = image.height;\r\n  //     let all = 0;\r\n  //     let tree = 0;\r\n  //     let ore = 0;\r\n\r\n  //     const stepX = width * this.stepPoints / 360;\r\n  //     const stepY = height * this.stepPoints / 180;\r\n\r\n  //     const sizeX = stepX * (360 / this.stepPoints);\r\n  //     const sizeY = stepY * (180 / this.stepPoints);\r\n\r\n  //     this.world.GetAllPoints(this.stepPoints).then((points) => {\r\n  //       console.log('length', points.length, width, height, width*height, `x ${sizeX} ${stepX} ${360 / this.stepPoints}`, `y ${sizeY} ${stepY} ${180 / this.stepPoints}`);\r\n\r\n  //       for (var x = 0; x < width; x++) {\r\n  //         for (var y = 0; y < height; y++) {\r\n  //           let idx = Helper.IdxMatrixToVector(new Point(x, y, 0), width, stepX, stepY);\r\n\r\n  //           let info = points[idx];\r\n\r\n  //           // if (x % 100 === 0)\r\n  //           //   console.log('trouble2', x, y, idx, info);\r\n\r\n  //           let color = BiomeColor.Get(info.Biome);\r\n\r\n  //           // if (info.Biome === WorldBiome.beach) {\r\n  //           //   color = [0, 0, 0, 255];\r\n  //           // } else {\r\n  //           //   color = [255, 255, 255, 255];\r\n  //           // }\r\n\r\n  //           let cell = (x + y * image.width) * 4;\r\n\r\n  //           data[cell] = color[0];\r\n  //           data[cell + 1] = color[1];\r\n  //           data[cell + 2] = color[2];\r\n  //           data[cell + 3] = color[3];\r\n\r\n  //           all++;\r\n  //         }\r\n  //       }\r\n\r\n  //       console.log(`info all:${all} tree:${tree} ore:${ore} ${width}x${height}`);\r\n  //       resolve(image);\r\n  //     });\r\n  //   });\r\n  // }\r\n\r\n  private renderSvgMercator(width: number, height: number, onlyShoreline = false) {\r\n    return new Promise<{ world: WorldInfo[], image: Uint8ClampedArray }>((resolve) => {\r\n      let all = 0;\r\n      let tree = 0;\r\n      let ore = 0;\r\n      let c = 0;\r\n      const array: Uint8ClampedArray = new Uint8ClampedArray(width * height * 4);\r\n\r\n      this.world.GetAllMercatorPoints(width, height, (info) => {\r\n        let color = BiomeColor.Get(info.Biome);\r\n\r\n        if (onlyShoreline) {\r\n          if (info.Shoreline) {\r\n            color = [0, 0, 0, 255];\r\n            c++;\r\n          } else {\r\n            color = [255, 255, 255, 255];\r\n          }\r\n        }\r\n\r\n        let mercatorPoint = Conversor.ToMercator(info.coordinate, width, height);\r\n        let cell = Conversor.ToIdxWidth(mercatorPoint, width) * 4;\r\n\r\n        array[cell] = color[0];\r\n        array[cell + 1] = color[1];\r\n        array[cell + 2] = color[2];\r\n        array[cell + 3] = color[3];\r\n\r\n        all++;\r\n\r\n      }).then((points) => {\r\n        console.log(`info svg all:${all} tree:${tree} ore:${ore} ${width}x${height} ${c}`);\r\n        resolve({ world: points, image: array });\r\n      });\r\n    });\r\n  }\r\n\r\n  // private renderGlobe(image: ImageData, mercatorData: Uint8ClampedArray, projection = d3.geoOrthographic()) {\r\n  //   const width = image.width;\r\n  //   const height = image.height;\r\n  //   const data = image.data;\r\n\r\n  //   for (var y = 0, i = -1; y < height; ++y) {\r\n  //     for (var x = 0; x < width; ++x) {\r\n  //       var p = projection.invert([x, y]),  = p[0],  = p[1];\r\n  //       if ( > 180 ||  < -180 ||  > 90 ||  < -90) {\r\n  //         i += 4;\r\n  //         continue;\r\n  //       }\r\n  //       var q = ((90 - ) / 180 * height | 0) * width + ((180 + ) / 360 * width | 0) << 2;\r\n  //       data[++i] = mercatorData[q];\r\n  //       data[++i] = mercatorData[++q];\r\n  //       data[++i] = mercatorData[++q];\r\n  //       data[++i] = 255;\r\n  //     }\r\n  //   }\r\n\r\n  //   return image;\r\n  // }\r\n\r\n  // private getShorelines(width: number, height: number): WorldInfo[][] {\r\n  //   const points: WorldInfo[][] = [];\r\n\r\n  //   for (var x = 0; x < width; x++) {\r\n  //     for (var y = 0; y < height; y++) {\r\n  //       let info = this.world.GetInformation(Conversor.FromMercator(new Point(x, y, 0), width, height), this.zoom);\r\n  //       if (info.Shoreline) {\r\n  //         if (points[x] === undefined) points[x] = [];\r\n  //         points[x][y] = info;\r\n  //       }\r\n  //     }\r\n  //   }\r\n\r\n  //   const all = WorldInfo.AllInOne(points);\r\n\r\n  //   const polygonPoints: WorldInfo[][] = [];\r\n\r\n  //   // while (points.length > 0) {\r\n  //   const polygon: WorldInfo[] = [];\r\n  //   let current: WorldInfo = null;\r\n\r\n  //   const first: WorldInfo = all[0];\r\n\r\n  //   console.log('first', first);\r\n  //   WorldInfo.RemoveOne(points, first, width, height);\r\n  //   polygon.push(first);\r\n\r\n  //   while (first !== current) {\r\n  //     const actualPoint = Conversor.ToMercator((current ?? first).coordinate, width, height);\r\n  //     const allnear = WorldInfo.GetAllNear(all, actualPoint, width, height);\r\n  //     console.log('all near', allnear);\r\n\r\n  //     // const nearNewPoints = allnear.filter((n: WorldInfo) => polygon.includes((p: WorldInfo) => (p.coordinate.longitude === n.coordinate.longitude && p.coordinate.latitude === n.coordinate.latitude)));\r\n\r\n  //     const nearNewPoints = [];\r\n  //     allnear.forEach((n) => {\r\n  //       let exists = false;\r\n  //       polygon.forEach((p) => {\r\n  //         if (p.coordinate.longitude === n.coordinate.longitude && p.coordinate.latitude === n.coordinate.latitude) {\r\n  //           exists = true;\r\n  //           return;\r\n  //         }\r\n  //       });\r\n  //       if (!exists) {\r\n  //         nearNewPoints.push(n);\r\n  //       }\r\n  //     });\r\n\r\n\r\n  //     const nearNewPoint = nearNewPoints.sort((a: WorldInfo, b: WorldInfo) => {\r\n  //       return (Helper.Pitagoras(Conversor.ToMercator(a.coordinate, width, height), actualPoint) <= Helper.Pitagoras(Conversor.ToMercator(b.coordinate, width, height), actualPoint)) ? 1 : -1;\r\n  //     })[0];\r\n\r\n  //     console.log('near', nearNewPoints, nearNewPoint);\r\n  //     WorldInfo.RemoveOne(points, nearNewPoint, width, height);\r\n  //     polygon.push(nearNewPoint);\r\n  //     current = nearNewPoint;\r\n\r\n  //   }\r\n  //   console.log('polygon', polygon);\r\n  //   polygonPoints.push(polygon);\r\n  //   // }\r\n\r\n  //   return polygonPoints;\r\n  // }\r\n}","<div class='centerbox'>\r\n  <canvas #canvas (click)=\"change()\"></canvas>\r\n  <svg #svg></svg>\r\n</div>","export enum WorldBiome {\r\n  deepWater,\r\n  swallowWater,\r\n  shoreline,\r\n  beach,\r\n  sandy,\r\n  grass,\r\n  woods,\r\n  forest,\r\n  mountain,\r\n  snow\r\n}","import { WorldInfo } from 'src/_model/world.info';\r\nimport { Point } from 'src/_model/point';\r\nimport { Perlin } from '../_utils/perlin.noise';\r\nimport { Coordinate } from 'src/_model/coordinate';\r\nimport { Conversor } from 'src/_utils/conversor';\r\nimport { WorldBiome } from 'src/_enum/world.biome';\r\nimport { Helper } from 'src/_utils/helper';\r\nimport { Vector } from 'src/_model/vector';\r\nimport { Layer } from 'src/_model/layer';\r\n\r\nexport class WorldGenerator {\r\n  private noise = { raw: [], topology: [], trees: [], ores: [] };\r\n  constructor(public seed = 8, useDefault = true, public radius = 5000) {\r\n    this.prepareSeed(seed);\r\n    this.noise.raw = useDefault ? Perlin.DefaultP : Perlin.RandomP;\r\n    this.noise.topology = this.generateNoise(this.noise.raw, seed);\r\n    this.noise.trees = this.generateNoise(this.generateNewNoise(), seed);\r\n    this.noise.ores = this.generateNoise(this.generateNewNoise(2), seed);\r\n  }\r\n\r\n  private prepareSeed(seed) {\r\n    if (seed > 0 && seed < 1) {\r\n      seed *= 65536;\r\n    }\r\n    seed = Math.floor(seed);\r\n    if (seed < 256) {\r\n      seed |= seed << 8;\r\n    }\r\n  }\r\n\r\n  private generateNoise(array, seed) {\r\n    const data = [];\r\n    for (let i = 0; i < 256; i++) {\r\n      if (i & 1) {\r\n        data[i] = data[i + 256] = array[i] ^ (seed & 255);\r\n      }\r\n      else {\r\n        data[i] = data[i + 256] = array[i] ^ ((seed >> 8) & 255);\r\n      }\r\n    }\r\n    return data;\r\n  }\r\n\r\n  private generateNewNoise(jump = 1) {\r\n    const data: [] = JSON.parse(JSON.stringify(this.noise.raw));\r\n    const noise = [];\r\n    while (data.length > 0) {\r\n      if (data.length <= jump)\r\n        noise.push(data.pop());\r\n      else\r\n        noise.push(data.splice(jump, 1));\r\n    }\r\n    return noise;\r\n  }\r\n\r\n  private cicle_gradient(a, b, x, y, r) {\r\n    var dist_points = (a - x) * (a - x) + (b - y) * (b - y);\r\n    r *= r;\r\n    return dist_points < r ? (((dist_points * 100 / r) - 100) * -1) / 100 : 0;\r\n  }\r\n\r\n  public GetInformation(coordinate: Coordinate, zoom = 1, onlyTopology: boolean = false) {\r\n    if (!(coordinate.radius != null)) {\r\n      coordinate.radius = zoom;\r\n    }\r\n    var point = Conversor.ToCardian(coordinate);\r\n    const factor = zoom;//this.radius * zoom;\r\n    const topology = Math.trunc((Perlin.Noise(point, factor, this.noise.topology, 0.68) + 0.5) * 100) / 100;\r\n    let trees = null;\r\n    let ores = null;\r\n    if (!onlyTopology) {\r\n      trees = Math.trunc((Perlin.Noise(point, factor * 100, this.noise.trees, 0.68) + 0.5) * 100) / 100;\r\n      ores = Math.trunc((Perlin.Noise(point, factor * 100, this.noise.ores, 0.68) + 0.5) * 100) / 100;\r\n    }\r\n    return new WorldInfo(topology, trees, ores, coordinate, point);\r\n  }\r\n\r\n  public GetAllMercatorPoints(width: number, height: number, inspector: (a: WorldInfo)=> void = null): Promise<WorldInfo[]> {\r\n    return new Promise<WorldInfo[]>((resolve) => {\r\n      const ini = new Date();\r\n      let count = 0;\r\n      let countLand = 0;\r\n      const ret: WorldInfo[] = [];\r\n      for (let x = 0; x < width; x++) {\r\n        for (let y = 0; y < height; y++) {\r\n          const info = this.GetInformation(Conversor.FromMercator(new Point(x, y, 0), width, height), 1);\r\n          if (info.topology >= 0.5) countLand++;\r\n          if (inspector !== null) {\r\n            inspector(info);\r\n          }\r\n          ret.push(info);\r\n          count++;\r\n        }\r\n      }\r\n      const end = new Date();\r\n      console.log(`duration ${Helper.TruncDecimals(end.getTime() / 1000 - ini.getTime() / 1000, 3)}s with count: ${count} ${countLand}`);\r\n      resolve(ret);\r\n    });\r\n  }\r\n\r\n  public GetAllPoints(step = 0.0001): Promise<WorldInfo[]> {\r\n    return new Promise<WorldInfo[]>((resolve) => {\r\n      const ini = new Date();\r\n      let count = 0;\r\n      const decPl = Helper.DecimalPlaces(step);\r\n      console.log('decimal', decPl, step);\r\n      const ret: WorldInfo[] = [];\r\n      for (let longitude = -90; longitude <= 90; longitude += step) {\r\n        for (let latitude = -180; latitude <= 180; latitude += step) {\r\n          ret.push(this.GetInformation(new Coordinate(Helper.TruncDecimals(longitude, decPl), Helper.TruncDecimals(latitude, decPl)), 1, true));\r\n          count++;\r\n        }\r\n      }\r\n      const end = new Date();\r\n      console.log(`duration ${Helper.TruncDecimals(end.getTime() / 1000 - ini.getTime() / 1000, 3)}s with count: ${count}`);\r\n      resolve(ret);\r\n    });\r\n  }\r\n\r\n  public getVectors(width: number, height: number): Promise<Layer[]> {\r\n    return new Promise<Layer[]>(resolve => {\r\n      console.log(`[getVectors] start ${width}x${height}`, new Date());\r\n      const allVectors: Vector[] = [];\r\n      let count = 0;\r\n      for (var x = 0; x < width - 1; x++) {\r\n        for (var y = 0; y < height - 1; y++) {\r\n          const no = new Point(x, y, 0);\r\n          if (this.GetInformation(Conversor.FromMercator(no, width, height), 1).topology < 0.5) continue;\r\n          const ne = new Point((1 + x), y, 0);\r\n          if (this.GetInformation(Conversor.FromMercator(ne, width, height), 1).topology < 0.5) continue;\r\n          const so = new Point(x, (1 + y), 0);\r\n          if (this.GetInformation(Conversor.FromMercator(so, width, height), 1).topology < 0.5) continue;\r\n          const se = new Point((1 + x), (1 + y), 0);\r\n          if (this.GetInformation(Conversor.FromMercator(se, width, height), 1).topology < 0.5) continue;\r\n\r\n          Vector.AddInIfInvertNotExistsAndRemoveItFrom(allVectors, new Vector(no, ne));\r\n          Vector.AddInIfInvertNotExistsAndRemoveItFrom(allVectors, new Vector(ne, se));\r\n          Vector.AddInIfInvertNotExistsAndRemoveItFrom(allVectors, new Vector(se, so));\r\n          Vector.AddInIfInvertNotExistsAndRemoveItFrom(allVectors, new Vector(so, no));\r\n\r\n          count++;\r\n        }\r\n      }\r\n      console.log('condensedVectors', allVectors.length, new Date());\r\n      let copyCondensedVectors = [...allVectors];\r\n      const layers: Layer[] = [];\r\n      while (copyCondensedVectors.length > 0) {\r\n        const vectors: Vector[] = [];\r\n        const startVector = copyCondensedVectors.pop();\r\n        vectors.push(startVector.copy);\r\n        let runner = startVector.copy;\r\n        while (!runner.end.equals(startVector.start)) {\r\n          const vectorIdx = copyCondensedVectors.findIndex((v) => runner.end.equals(v.start));\r\n          runner = copyCondensedVectors.splice(vectorIdx, 1)[0];\r\n          vectors.push(runner.copy);\r\n        }\r\n        layers.push(new Layer(vectors).shrunk());\r\n      }\r\n      console.log('layers', layers.length, new Date());\r\n      // const shrunkenLayers: Layer[] = [];\r\n      // layers.forEach((layer) => {\r\n      //   shrunkenLayers.push(layer.shrunk());\r\n      // });\r\n      // console.log('shrunkenLayeredPaths', shrunkenLayers.length, new Date());\r\n      resolve(layers);\r\n    });\r\n  }\r\n\r\n  public getSvg(width: number, height: number): Promise<Vector[][]> {\r\n    return new Promise<Vector[][]>(resolve => {\r\n      console.log('start', width, height, new Date());\r\n      const allVectors: Vector[] = [];\r\n      let count = 0;\r\n      for (var x = 0; x < width - 1; x++) {\r\n        for (var y = 0; y < height - 1; y++) {\r\n          const no = new Point(x, y, 0);\r\n          if (this.GetInformation(Conversor.FromMercator(no, width, height), 1).topology < 0.5) continue;\r\n          const ne = new Point((1 + x), y, 0);\r\n          if (this.GetInformation(Conversor.FromMercator(ne, width, height), 1).topology < 0.5) continue;\r\n          const so = new Point(x, (1 + y), 0);\r\n          if (this.GetInformation(Conversor.FromMercator(so, width, height), 1).topology < 0.5) continue;\r\n          const se = new Point((1 + x), (1 + y), 0);\r\n          if (this.GetInformation(Conversor.FromMercator(se, width, height), 1).topology < 0.5) continue;\r\n\r\n          allVectors.push(new Vector(no, ne));\r\n          allVectors.push(new Vector(ne, se));\r\n          allVectors.push(new Vector(se, so));\r\n          allVectors.push(new Vector(so, no));\r\n\r\n          count++;\r\n        }\r\n      }\r\n      console.log('allVectors', count, allVectors.length, new Date());\r\n      let copyAllVectors = [...allVectors];\r\n      const condensedVectors: Vector[] = [];\r\n      while (copyAllVectors.length > 0) {\r\n        const vector = copyAllVectors.pop();\r\n        if (!vector.inverted.containsIn(copyAllVectors)) {\r\n          condensedVectors.push(vector);\r\n        } else {\r\n          copyAllVectors = copyAllVectors.filter((v) => !v.equals(vector.inverted));\r\n        }\r\n      }\r\n      console.log('condensedVectors', condensedVectors.length, new Date());\r\n      let copyCondensedVectors = [...condensedVectors];\r\n      const layeredPaths: Vector[][] = [];\r\n      while (copyCondensedVectors.length > 0) {\r\n        const layer: Vector[] = [];\r\n        const startVector = copyCondensedVectors.pop();\r\n        layer.push(startVector.copy);\r\n        let runner = startVector.copy;\r\n        while (!runner.end.equals(startVector.start)) {\r\n          const vectorIdx = copyCondensedVectors.findIndex((v) => runner.end.equals(v.start));\r\n          runner = copyCondensedVectors.splice(vectorIdx, 1)[0];\r\n          layer.push(runner.copy);\r\n        }\r\n        layeredPaths.push(layer);\r\n      }\r\n      console.log('layeredPaths', layeredPaths.length, new Date());\r\n      const shrunkenLayeredPaths: Vector[][] = [];\r\n      layeredPaths.forEach((layer) => {\r\n        const shrunkenLayer: Vector[] = [];\r\n        let runner: Vector = layer[0].copy;\r\n        for (let i = 1; i < layer.length; i++) {\r\n          if (runner.isCollinear(layer[i].end)) {\r\n            runner = new Vector(runner.start, layer[i].end);\r\n          } else {\r\n            shrunkenLayer.push(runner.copy);\r\n            runner = layer[i].copy;\r\n          }\r\n        }\r\n        shrunkenLayer.push(runner.copy);\r\n        shrunkenLayeredPaths.push(shrunkenLayer);\r\n      });\r\n      console.log('shrunkenLayeredPaths', shrunkenLayeredPaths.length, new Date());\r\n      resolve(shrunkenLayeredPaths);\r\n    });\r\n  }\r\n\r\n  public GetShorlines(step = 0.0001): WorldInfo[][] {\r\n    const ret: WorldInfo[][] = [];\r\n    const coordinate = new Coordinate(0, 0);\r\n    const polygon: Coordinate[] = this.probePolygon(coordinate, step);\r\n    ret.push(polygon.map((p) => this.GetInformation(p)));\r\n    return ret;\r\n  }\r\n\r\n  private probePolygon(coordinate = new Coordinate(0, 0), step = 0.0001): Coordinate[] {\r\n    const polygon: Coordinate[] = [];\r\n    let points: Coordinate[] = [];\r\n    do {\r\n      coordinate = coordinate.addLongitude(step);\r\n      points = this.probeNearShorepoints(coordinate, step);\r\n    } while (points === [])\r\n\r\n    while (points.length !== 0) {\r\n      const newPoints = [];\r\n      points.forEach((point: Coordinate) => {\r\n        // const point = points[0];\r\n        polygon.push(point);\r\n        console.log('point', point, polygon.length);\r\n        newPoints.push(...this.probeNearShorepoints(point, step));\r\n      });\r\n      const beforeCount = newPoints.length;\r\n      points = newPoints.filter((newPoint: Coordinate) => polygon.find((p: Coordinate) => p.latitude === newPoint.latitude && p.longitude === newPoint.longitude) === undefined);\r\n      const afterCount = points.length;\r\n      if (afterCount === beforeCount) {\r\n        console.log('problema', afterCount, beforeCount);\r\n      } else if (afterCount > beforeCount) {\r\n        console.log('mais problema ainda', afterCount, beforeCount);\r\n      } else {\r\n        console.log('ok', afterCount, beforeCount);\r\n      }\r\n    }\r\n\r\n    console.log('finito', polygon);\r\n\r\n    return polygon;\r\n  }\r\n\r\n  private probeNearShorepoints(coordinate: Coordinate, step = 0.0001): Coordinate[] {\r\n    const points: Coordinate[] = [];\r\n    const east = coordinate.addLongitude(step);\r\n    const eastInfo = this.GetInformation(east, 1, true);\r\n    if (eastInfo.Biome === WorldBiome.shoreline) {\r\n      // console.log('east', east, eastInfo);\r\n      points.push(east);\r\n    }\r\n    const south = coordinate.addLatitude(step);\r\n    const southInfo = this.GetInformation(south, 1, true);\r\n    if (southInfo.Biome === WorldBiome.shoreline) {\r\n      // console.log('south', south, southInfo);\r\n      points.push(south);\r\n    }\r\n    const west = coordinate.addLongitude(-step);\r\n    const westInfo = this.GetInformation(west, 1, true);\r\n    if (westInfo.Biome === WorldBiome.shoreline) {\r\n      // console.log('west', west, westInfo);\r\n      points.push(west);\r\n    }\r\n    const north = coordinate.addLatitude(-step);\r\n    const northInfo = this.GetInformation(north, 1, true);\r\n    if (northInfo.Biome === WorldBiome.shoreline) {\r\n      // console.log('north', north, northInfo);\r\n      points.push(north);\r\n    }\r\n    return points;\r\n  }\r\n}","import { Helper } from 'src/_utils/helper';\r\n\r\nexport class Coordinate {\r\n  constructor(public latitude: number, public longitude: number, public radius?: number) { }\r\n\r\n  public addLatitude(value: number, precision = 4) {\r\n    return new Coordinate(Helper.TruncDecimals(this.latitude + value, precision), this.longitude);\r\n  }\r\n  public addLongitude(value: number, precision = 4) {\r\n    return new Coordinate(this.latitude, Helper.TruncDecimals(this.longitude + value, precision));\r\n  }\r\n}","import { Vector } from \"./vector\";\n\nexport class Layer {\n  constructor(public limit: Vector[] = [], public innerLayers: Layer[] = []) { }\n\n  public shrunk(): Layer {\n    const layer = [...this.limit];\n    const array = [];\n    let runner: Vector = layer[0].copy;\n    for (let i = 1; i < layer.length; i++) {\n      if (runner.isCollinear(layer[i].end)) {\n        runner = new Vector(runner.start, layer[i].end);\n      } else {\n        array.push(runner.copy);\n        runner = layer[i].copy;\n      }\n    }\n    array.push(runner.copy);\n    return new Layer(array, this.innerLayers);\n  }\n}","import { Vector } from \"./vector\";\r\n\r\nexport class Point {\r\n  constructor(public X: number, public Y: number, public Z: number) { }\r\n\r\n  public equals(point: Point): boolean {\r\n    return (this.X === point.X && this.Y === point.Y && this.Z === point.Z);\r\n  }\r\n\r\n  public inside(vectors: Vector[]) {\r\n    let inside = false;\r\n    for (let i = 0, j = vectors.length - 1; i < vectors.length; j = i++) {\r\n      const xi = vectors[i].start.X, yi = vectors[i].start.Y;\r\n      const xj = vectors[j].end.X, yj = vectors[j].end.Y;\r\n\r\n      const intersect = ((yi > this.Y) != (yj > this.Y)) && (this.X < (xj - xi) * (this.Y - yi) / (yj - yi) + xi);\r\n      if (intersect) inside = !inside;\r\n    }\r\n    return inside;\r\n  }\r\n}","import { Point } from \"./point\";\n\nexport class Vector {\n  constructor(public start: Point, public end: Point) { }\n\n  public get inverted(): Vector {\n    return new Vector(this.end, this.start);\n  }\n\n  public get copy(): Vector {\n    return new Vector(this.start, this.end);\n  }\n\n  public containsIn(array: Vector[]): boolean {\n    for (let i = 0; i < array.length; i++) {\n      if ((array[i].start.equals(this.start)) && (array[i].end.equals(this.end))) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  public isCollinear(a: Point): boolean {\n    const A = this.start.X * (this.end.Y - a.Y) + this.end.X * (a.Y - this.start.Y) + a.X * (this.start.Y - this.end.Y);\n    return A === 0;\n  }\n\n  public isClockwise(vector: Vector): boolean {\n    const dot = (this.end.X - this.start.X)*(vector.end.X - vector.start.X) + (this.end.Y - this.start.Y)*(vector.end.Y - vector.start.Y);\n    const det = (this.end.X - this.start.X)*(vector.end.Y - vector.start.Y) - (this.end.Y - this.start.Y)*(vector.end.X - vector.start.X);\n    return Math.atan2(det, dot) > 0;\n  }\n\n  public equals(vector: Vector): boolean {\n    return (this.start.equals(vector.start) && this.end.equals(vector.end));\n  }\n\n  public static AddInIfInvertNotExistsAndRemoveItFrom(vectors: Vector[], vector: Vector): Vector[] {\n    const vectorIdx = vectors.findIndex((v) => vector.inverted.equals(v));\n    if (vectorIdx > -1) {\n      vectors.splice(vectorIdx, 1);\n    } else {\n      vectors.push(vector);\n    }\n    return vectors;\n  }\n}","import { WorldBiome } from 'src/_enum/world.biome';\r\nimport { Point } from 'src/_model/point';\r\nimport { Coordinate } from 'src/_model/coordinate';\r\nimport { Conversor } from 'src/_utils/conversor';\r\n\r\nexport class WorldInfo {\r\n  public constructor(public topology: number, public trees: number, public ores: number, public coordinate: Coordinate, public point: Point) { }\r\n\r\n  public get Biome(): WorldBiome {\r\n    if (this.topology < 0.35) {\r\n      return WorldBiome.deepWater;\r\n    } else if (this.topology < 0.50) {\r\n      return WorldBiome.swallowWater;\r\n    } else if (this.topology === 0.50) {\r\n      return WorldBiome.shoreline;\r\n    } else if (this.topology < 0.53) {\r\n      return WorldBiome.beach;\r\n    } else if (this.topology < 0.56) {\r\n      return WorldBiome.sandy;\r\n    } else if (this.topology < 0.62) {\r\n      return WorldBiome.grass;\r\n    } else if (this.topology < 0.70) {\r\n      return WorldBiome.woods;\r\n    } else if (this.topology < 0.75) {\r\n      return WorldBiome.forest;\r\n    } else if (this.topology < 0.80) {\r\n      return WorldBiome.mountain;\r\n    } else if (this.topology < 0.90) {\r\n      return WorldBiome.snow;\r\n    }\r\n  };\r\n\r\n  public get Shoreline(): boolean {\r\n    return this.topology === 0.50;\r\n  }\r\n\r\n  public get Tree(): boolean {\r\n    return (this.trees < 0.20) && this.Biome == WorldBiome.grass;\r\n  }\r\n\r\n  public get Ore(): boolean {\r\n    return (this.ores < 0.25);\r\n  }\r\n\r\n  public get LatitudeLine(): boolean {\r\n    return (Conversor.ToDegrees(this.coordinate.latitude) % 10 === 0);\r\n  }\r\n\r\n  public get LongitudeLine(): boolean {\r\n    return (Conversor.ToDegrees(this.coordinate.longitude) % 10 === 0);\r\n  }\r\n\r\n  public static AllInOne(data: any[][]): any[] {\r\n    const ret = [];\r\n    data.forEach((inner) => inner.forEach(d => {\r\n      if (d !== null) {\r\n        ret.push(d);\r\n      }\r\n    }))\r\n    return ret;\r\n  }\r\n\r\n  public static RemoveOne(points: WorldInfo[][], item: WorldInfo, width: number, height: number): void {\r\n    const itemPoint = Conversor.ToMercator(item.coordinate, width, height);\r\n    points[itemPoint.X].splice(itemPoint.Y, 1);\r\n  }\r\n\r\n  public static GetAllNear(points: WorldInfo[], point: Point, width: number, height: number): WorldInfo[] {\r\n    const variator = 2;\r\n    return points.filter((p: WorldInfo) => {\r\n      const itemPoint = Conversor.ToMercator(p.coordinate, width, height);\r\n      return (itemPoint.X >= point.X - variator && itemPoint.X <= point.X + variator) &&\r\n        (itemPoint.Y >= point.Y - variator && itemPoint.Y <= point.Y + variator) &&\r\n        (itemPoint.Z >= point.Z - variator && itemPoint.Z <= point.Z + variator);\r\n    });\r\n  }\r\n}","import { WorldBiome } from 'src/_enum/world.biome';\r\n\r\nexport class BiomeColor {\r\n  static swallowWater = [0, 191, 255, 255];\r\n  static deepWater = [65, 105, 225, 255];\r\n  static grass = [50, 205, 50, 255];\r\n  static woods = [34, 139, 34, 255];\r\n  static forest = [0, 100, 0, 255];\r\n  static sandy = [210, 180, 140, 255];\r\n  static beach = [238, 214, 175, 255];\r\n  static mountain = [139, 137, 137, 255];\r\n  static snow = [255, 250, 250, 255];\r\n\r\n  public static Get(type: WorldBiome) {\r\n    switch (type) {\r\n      case WorldBiome.deepWater:\r\n        return this.deepWater;\r\n      case WorldBiome.swallowWater:\r\n        return this.swallowWater;\r\n      case WorldBiome.woods:\r\n        return this.woods;\r\n      case WorldBiome.forest:\r\n        return this.forest;\r\n      case WorldBiome.sandy:\r\n        return this.sandy;\r\n      case WorldBiome.beach:\r\n        return this.beach;\r\n      case WorldBiome.mountain:\r\n        return this.mountain;\r\n      case WorldBiome.snow:\r\n        return this.snow;\r\n      default:\r\n      case WorldBiome.grass:\r\n        return this.grass;\r\n    }\r\n  }\r\n}","import { Coordinate } from 'src/_model/coordinate';\r\nimport { Point } from 'src/_model/point';\r\n\r\nexport class Conversor {\r\n  public static ToPolar(point: Point): Coordinate {\r\n    return new Coordinate(\r\n      Math.atan(point.Y / point.Z),\r\n      Math.atan(Math.sqrt(Math.pow(point.X, 2) + Math.pow(point.Y, 2) / point.Z)),\r\n      Math.sqrt(Math.pow(point.X, 2) + Math.pow(point.Y, 2) + Math.pow(point.Z, 2)));\r\n  }\r\n  public static ToCardian(coordinate: Coordinate): Point {\r\n    return new Point(\r\n      coordinate.radius * Math.cos(Conversor.ToRadians(coordinate.longitude)) * Math.cos(Conversor.ToRadians(coordinate.latitude)),\r\n      coordinate.radius * Math.sin(Conversor.ToRadians(coordinate.longitude)) * Math.cos(Conversor.ToRadians(coordinate.latitude)),\r\n      coordinate.radius * Math.sin(Conversor.ToRadians(coordinate.latitude)));\r\n  }\r\n  public static ToDegrees(angle: number): number {\r\n    return angle * (180 / Math.PI);\r\n  }\r\n  public static ToRadians(angle: number): number {\r\n    return angle * (Math.PI / 180);\r\n  }\r\n\r\n  public static ToMercator(coordinate: Coordinate, width: number, height: number): Point {\r\n    return new Point(Math.round((coordinate.longitude + 180)/(360 / width)), Math.round((coordinate.latitude + 90)/(180 / height)), 0);\r\n  }\r\n\r\n  public static FromMercator(point: Point, width: number, height: number): Coordinate {\r\n    return new Coordinate((point.Y * (180 / height)) - 90, (point.X * (360 / width)) - 180);\r\n  }\r\n\r\n  public static ToIdxWidth(point: Point, width: number): number {\r\n    return (point.X + (point.Y) * width);\r\n  }\r\n}\r\n\r\nexport const RAD2DEG = 180 / Math.PI;\r\nexport const PI_4 = Math.PI / 4;","import { Point } from 'src/_model/point';\r\n\r\nexport class Helper {\r\n  public static TruncDecimals(num: number, precision = 4): number {\r\n    return Math.trunc(Math.pow(10, precision) * num)/Math.pow(10, precision);\r\n  }\r\n\r\n  public static CloneAny(data: any): any {\r\n    return JSON.parse(JSON.stringify(data));\r\n  }\r\n\r\n  public static Pitagoras(a: Point, b: Point): number {\r\n    return Math.sqrt(Math.pow(a.X - b.X, 2) + Math.pow(a.Y - b.Y, 2) + Math.pow(a.Z - b.Z, 2));\r\n  }\r\n\r\n  public static DecimalPlaces(n: number) {\r\n    let a;\r\n    return (a=(n.toString().charAt(0)=='-'?n-1:n+1).toString().replace(/^-?[0-9]+\\.?([0-9]+)$/,'$1').length)>=1?a:0;\r\n  }\r\n\r\n  public static IdxMatrixToVector(point: Point, width: number, stepX = 1, stepY = 1): number {\r\n    return Math.trunc((point.Y) * width + (point.X));\r\n  }\r\n\r\n  public static IdxVectorToMatrix(idx: number, width: number, stepX = 1, stepY = 1): Point {\r\n    return new Point((idx % width), (idx / width), 0);\r\n  }\r\n\r\n  public static Matrix(width = 200, height = 100, action: (x: number, y: number) => void = () => null, initx = 0, inity = 0, increment = 1) {\r\n    const ini = new Date();\r\n    let count = 0;\r\n    for (let y = inity; y < height; y += increment) {\r\n      for (let x = initx; x < width; y += increment) {\r\n        if (action !== null) action(x, y);\r\n      }\r\n    }\r\n    const end = new Date();\r\n    console.log(`duration [Matrix] ${ initx > 0 || inity > 0 ? `${initx}:${inity}` : '' } ${width}:${height} ${ increment > 1 ? increment : '' } ${Helper.TruncDecimals(end.getTime() / 1000 - ini.getTime() / 1000, 3)}s with count: ${count}`);\r\n  }\r\n}","import { Point } from 'src/_model/point';\r\n\r\nexport class Perlin {\r\n  private static perlin(x, y, z, p) {\r\n    const X = Math.floor(x) & 255,\r\n      Y = Math.floor(y) & 255,\r\n      Z = Math.floor(z) & 255;\r\n    x -= Math.floor(x);\r\n    y -= Math.floor(y);\r\n    z -= Math.floor(z);\r\n    const u = this.fade(x),\r\n      v = this.fade(y),\r\n      w = this.fade(z);\r\n    const A = p[X] + Y, AA = p[A] + Z, AB = p[A + 1] + Z,\r\n      B = p[X + 1] + Y, BA = p[B] + Z, BB = p[B + 1] + Z;\r\n\r\n    return this.lerp(w, this.lerp(v, this.lerp(u, this.grad(p[AA], x, y, z),\r\n      this.grad(p[BA], x - 1, y, z)),\r\n      this.lerp(u, this.grad(p[AB], x, y - 1, z),\r\n        this.grad(p[BB], x - 1, y - 1, z))),\r\n      this.lerp(v, this.lerp(u, this.grad(p[AA + 1], x, y, z - 1),\r\n        this.grad(p[BA + 1], x - 1, y, z - 1)),\r\n        this.lerp(u, this.grad(p[AB + 1], x, y - 1, z - 1),\r\n          this.grad(p[BB + 1], x - 1, y - 1, z - 1))));\r\n  }\r\n  private static fade(t) { return t * t * t * (t * (t * 6 - 15) + 10); }\r\n  private static lerp(t, a, b) { return a + t * (b - a); }\r\n  private static grad(hash, x, y, z) {\r\n    const h = hash & 15;\r\n    const u = h < 8 ? x : y,\r\n      v = h < 4 ? y : h == 12 || h == 14 ? x : z;\r\n    return ((h & 1) == 0 ? u : -u) + ((h & 2) == 0 ? v : -v);\r\n  };\r\n\r\n  private static octaves(x, y, z, p, persistence = 0.5, octaves = 6) {\r\n    let total = 0;\r\n    let frequency = 1;\r\n    let amplitude = 1;\r\n    let maxValue = 0;\r\n    for (let i = 0; i < octaves; i++) {\r\n      total += this.perlin(x * frequency, y * frequency, z * frequency, p) * amplitude;\r\n      maxValue += amplitude;\r\n      amplitude *= persistence;\r\n      frequency *= 2;\r\n    }\r\n    return total / maxValue;\r\n  }\r\n\r\n  public static readonly DefaultP = [151, 160, 137, 91, 90, 15,\r\n    131, 13, 201, 95, 96, 53, 194, 233, 7, 225, 140, 36, 103, 30, 69, 142, 8, 99, 37, 240, 21, 10, 23,\r\n    190, 6, 148, 247, 120, 234, 75, 0, 26, 197, 62, 94, 252, 219, 203, 117, 35, 11, 32, 57, 177, 33,\r\n    88, 237, 149, 56, 87, 174, 20, 125, 136, 171, 168, 68, 175, 74, 165, 71, 134, 139, 48, 27, 166,\r\n    77, 146, 158, 231, 83, 111, 229, 122, 60, 211, 133, 230, 220, 105, 92, 41, 55, 46, 245, 40, 244,\r\n    102, 143, 54, 65, 25, 63, 161, 1, 216, 80, 73, 209, 76, 132, 187, 208, 89, 18, 169, 200, 196,\r\n    135, 130, 116, 188, 159, 86, 164, 100, 109, 198, 173, 186, 3, 64, 52, 217, 226, 250, 124, 123,\r\n    5, 202, 38, 147, 118, 126, 255, 82, 85, 212, 207, 206, 59, 227, 47, 16, 58, 17, 182, 189, 28, 42,\r\n    223, 183, 170, 213, 119, 248, 152, 2, 44, 154, 163, 70, 221, 153, 101, 155, 167, 43, 172, 9,\r\n    129, 22, 39, 253, 19, 98, 108, 110, 79, 113, 224, 232, 178, 185, 112, 104, 218, 246, 97, 228,\r\n    251, 34, 242, 193, 238, 210, 144, 12, 191, 179, 162, 241, 81, 51, 145, 235, 249, 14, 239, 107,\r\n    49, 192, 214, 31, 181, 199, 106, 157, 184, 84, 204, 176, 115, 121, 50, 45, 127, 4, 150, 254,\r\n    138, 236, 205, 93, 222, 114, 67, 29, 24, 72, 243, 141, 128, 195, 78, 66, 215, 61, 156, 180];\r\n\r\n  public static get RandomP(): number[] {\r\n    const array = new Uint8Array(256);\r\n    window.crypto.getRandomValues(array);\r\n    const list = [];\r\n    array.forEach((v) => list.push(v));\r\n    return list;\r\n  }\r\n\r\n  public static Noise(point: Point, factor = 1, p, persistence = 0.5, octaves = 6) {\r\n    return this.octaves(point.X/factor, point.Y/factor, point.Z/factor, p, persistence, octaves);\r\n  }\r\n}","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\n\nconst routes: Routes = [];\n\n@NgModule({\n  imports: [RouterModule.forRoot(routes)],\n  exports: [RouterModule]\n})\nexport class AppRoutingModule { }\n","import { Component } from '@angular/core';\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.scss']\n})\nexport class AppComponent {\n  title = 'World';\n}\n","<map-tool>\r\n</map-tool>","import { BrowserModule } from '@angular/platform-browser';\nimport { NgModule } from '@angular/core';\n\nimport { AppRoutingModule } from './app-routing.module';\nimport { AppComponent } from './app.component';\nimport { MapToolComponent } from 'src/_component/map-tool/map-tool.component';\n\n@NgModule({\n  declarations: [\n    AppComponent,\n    MapToolComponent\n  ],\n  imports: [\n    BrowserModule,\n    AppRoutingModule\n  ],\n  providers: [],\n  bootstrap: [AppComponent]\n})\nexport class AppModule { }\n","// This file can be replaced during build by using the `fileReplacements` array.\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\n// The list of file replacements can be found in `angular.json`.\n\nexport const environment = {\n  production: false\n};\n\n/*\n * For easier debugging in development mode, you can import the following file\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\n *\n * This import should be commented out in production mode because it will have a negative impact\n * on performance if an error is thrown.\n */\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule)\n  .catch(err => console.error(err));\n"]}